<!DOCTYPE html>
<html>
  <head>
    <title>SlackDeck-Proto</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <div class="small-tab">
      <div class="webview">
        <webview id="full-contents" src="about:blank" />
      </div>
    </div>

    <div class="middle-tab">
      <div class="webview">
        <webview id="no-channel-contents" src="about:blank" />
      </div>
    </div>

    <div class="middle-tab">
      <div class="webview">
        <webview id="no-channel-contents" src="about:blank" />
      </div>
    </div>

    <div class="middle-tab">
      <div class="webview">
        <webview id="no-channel-contents" src="about:blank" />
      </div>
    </div>

    <div class="small-tab">
      <div class="webview">
        <webview id="full-contents" src="about:blank" />
      </div>
    </div>

    <script>
      const json = require('./settings.json');
      const css = ".client_channels_list_container { display: none !important; }";
      const webviews = Array.from(document.getElementsByTagName("webview"));

      webviews.forEach(function(webview) {
          webview.addEventListener('dom-ready', function() {
              if (!checkUrlIsSet(webview, json.url)) { loadURL(webview, json.url); }
              if (!shouldkRenderFullContents(webview)) { applyCss(webview, css); }
          });
      });

      function shouldkRenderFullContents(webview) {
          return webview.id == "full-contents";
      }
      function checkUrlIsSet(webview, url) {
          return webview.attributes.src.value == url;
      }
      function loadURL(webview, url) {
          webview.loadURL(url);
      }
      function applyCss(webview, css) {
          webview.insertCSS(css);
      }
    </script>

  </body>
</html>
